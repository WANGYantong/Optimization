function G = GenerateGraph()

vertice_names = {'data_server','relay1','relay2','relay3','relay4','relay5',...
    'relay6','relay7','relay8','relay9','relay10','relay11','relay12',...
        'relay13','relay14','relay15','ec1','ec2','ec3','ec4','ec5',...
        'ec6','ec7','ec8','ec9','ec10','ec11','ec12','ec13','ec14','ec15'};

N = length(vertice_names);

for v = 1:N
        eval([vertice_names{v},'=',num2str(v),';']);
end

s = [data_server,relay1,relay1,relay3,relay3,relay3,relay2,relay2,relay7,...
        relay7,relay6,relay5,relay5,relay4,relay14,relay11,relay11,relay11,...
        relay9,relay9,relay8,relay15,relay13,relay13,relay12,relay12,relay12,...
        relay10,ec1,ec1,ec1,ec2,ec2,ec3,ec4,ec4,ec8,ec8,ec5,ec6,ec6,ec7,...
        ec8,ec9,ec10,ec12,ec13,ec11,ec14];
t = [relay1,relay2,relay3,relay7,relay6,relay5,relay5,relay4,relay14,...
        relay11,relay11,relay11,relay9,relay8,relay15,relay15,ec2,relay13,...
        relay13,relay8,relay10,ec1,ec2,relay12,ec6,ec3,relay10,...
        ec3,ec8,ec5,ec2,ec5,ec6,ec4,ec10,ec7,ec5,ec9,ec9,ec13,ec10,ec11,...
        ec12,ec12,ec13,ec14,ec14,ec15,ec15];

weights=ones(size(s));

G=graph(s,t,weights,vertice_names);

p=plot(G,'NodeLabel',G.Nodes.Name);

p.XData=[7, 7,8,6,9,7,6,5,10,8,11,6,8,6,4,3,3,5,11,13,3,8,11,1,...
         5,11,9,3,8,5,7];
p.YData=[11,9,8,8,7,7,7,7, 6,6, 5,6,5,5,6,5,3,3, 3, 1,2,3, 1,1,...
         2, 2,1,1,2,1,1];

title('Simulation topology');

end

